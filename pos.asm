;macro for printing a string
PRINT MACRO M
	MOV AH, 09H
	MOV DX, OFFSET M
	INT 21H
ENDM

.MODEL SMALL
.STACK 64

;---------------Data Segment----------------
.DATA	;data definition

;------LOGIN
	PASSCODE DB "Q$"
  	LOGIN_M1 DB 10, 13, "------PLASHSPEED POS------"
  			 DB 10, 13, "ENTER PASSWORD: $"
 	LG DB 21          ;<=== MAXIMUM NUMBER OF CHARS ALLOWED (20).
       DB ?           ;<=== NUMBER OF CHARS THAT USER ENTERED (?).
       DB 21 DUP(0)   ;<=== ARRAY OF CHARS (FINISH WITH 0DH=13).

;---CONSTANTS
	TEN DB 10
	HUN DB 100
	CC DB 0			;CHOICE FOR MAIN MENU


;---PRICE OF PRODUCTS
	SHIRT DB 10
	SHORTS DB 15
	HATS DB 6
	SOCKS DB 5
;---AMOUNT OF PRODUCTS IN STOCK
	SHIRT_NUM DB 50
	SHORTS_NUM DB 60
	HATS_NUM DB 70
	SOCKS_NUM DB 30
	SHIRT_NUMD DB 0, 0, 0
	SHORTS_NUMD DB 0, 0, 0
	HATS_NUMD DB 0, 0, 0
	SOCKS_NUMD DB 0, 0, 0

;---main menu
	MAIN_MENU DB 10, 13, 10, 13, "-----PLASHSPEED POS----- "
			  DB 10, 13, "1. CHECKOUT "
			  DB 10, 13, "2. INVENTORY MANAGEMENT "
			  DB 10, 13, "3. CUSTOMER MANAGEMENT "
			  DB 10, 13, "4. SALES REPORTING "
			  DB 10, 13, "5. RETURN AND REFUND "
			  DB 10, 13, "6. STAFF MANAGEMNT "
			  DB 10, 13, "9. EXIT "
			  DB 10, 13, "  "
			  DB 10, 13, "CHOICE: $"

;---product menu
	PRO_MENU DB 10, 13, "-------PRODUCT MENU------- "
			 DB 10, 13, "1. SHIRT"
			 DB 10, 13, "2. SHORTS"
			 DB 10, 13, "3. HATS"
			 DB 10, 13, "4. SOCKS"
			 DB 10, 13, "9. EXIT"
			 DB 10, 13, " "
			 DB 10, 13, "CHOICE: $"


;---inventory menu
	INV_MENU DB 10, 13, 10, 13, "---------INVENTORY MANAGEMENT---------"
			 DB 10, 13, "1. DISPLAY STOCK REPORT"
			 DB 10, 13, "2. UPDATE STOCK"
			 DB 10, 13, "3. SET ORDER REMINDER"
			 DB 10, 13, "4. SEND ORDER REMINDER"
			 DB 10, 13, "9. EXIT"
			 DB 10, 13, " "
			 DB 10, 13, "CHOICE: $"
	;----SET REMINDER
	INV_M1 DB 10, 13, "MIN NUMBER OF PRODUCT IN STORE: $"
	INV_M2 DB 10, 13, "SEND REMINDER WHEN LIMIT REACH $"
	INV_M3 DB "IS LOW IN STOCK. STOCK AMOUNT: $"
	INV_M4 DB 10, 13, "SHIRT $"
	INV_M5 DB 10, 13, "SHORTS $"
	INV_M6 DB 10, 13, "HATS $"
	INV_M7 DB 10, 13, "SOCKS $"
	RMD DB 0, 0
	;---STOCK REPORT
	INV_M8 DB 10, 13, "-------STOCK REPORT-------"
		   DB 10, 13, "ITEM      QUANTITY "
		   DB 10, 13, " SHIRT      $"
	INV_M9 DB 10, 13, " SHORTS     $"
	INV_M10 DB 10, 13, " HATS       $"
	INV_M11 DB 10, 13, " SOCKS      $"
	;---UPDATE STOCK
	INV_M12 DB 10, 13, "ENTER QUANTITY: $"
	INV_M13 DB 10, 13, "TOTAL QUANTITY: $"
	INV_M DB 10, 13, " $"
	SHIRT_NUM_UP DB 0, 0
	SHORTS_NUM_UP DB 0, 0
	HATS_NUM_UP DB 0, 0
	SOCKS_NUM_UP DB 0, 0


;---staff menu 1
	STF_MENU1 DB 10, 13, 10, 13, "-----------STAFF MANAGEMENT----------- "
			  DB 10, 13, "1. NEW STAFF REGISTER "
			  DB 10, 13, "2. CHANGE PASSWORD"
			  DB 10, 13, "3. REMOVE STAFF "
			  DB 10, 13, "4. EXIT "
			  DB 10, 13, "  "
			  DB 10, 13, "CHOICE: $" 
;---staff change password
	STF_M1 DB 10, 13, 10, 13, "------CHANGE PASSWORD------ "
		   DB 10, 13, "ENTER NEW PASSWORD: $"
	STF_M2 DB 10, 13, "CONFIRM NEW PASSWORD: $"
	STF_M3 DB 10, 13, "2 PASSWORS MUST BE SAME!!! $"
	STF_M4 DB 10, 13, 10, 13, "PASSWORD RESET SUCCEED!!!$"
	NEW_PSW DB 26, ?, 26 DUP('$')
	CON_PSW DB 26, ?, 26 DUP('$')
;---REMOVE STAFF
	STF_M5 DB 10, 13, 10, 13, "ENTER NAME: $"
	STF_M6 DB 10, 13, "CONFIRM TO REMOVE STAFF: $"
	STF_M7 DB " ???"
		   DB 10, 13, "1. YES"
		   DB 10, 13, "2. NO "
		   DB 10, 13, 10, 13, "CHOICE: $"
	STF_M8 DB 10, 13, "STAFF REMOVAL SUCCEED $"
	STF_M9 DB 10, 13, "STAFF REMOVAL FAIL $"
	STF_ID_RMV DB 16, ?, 16 DUP('$')
;---ADD STAFF
	STF_M10 DB 10, 13, "CONFIRM TO ADD STAFF: $"
	STF_M11 DB " ???"
		    DB 10, 13, "1. YES"
		    DB 10, 13, "2. NO "
		    DB 10, 13, 10, 13, "CHOICE: $"
	STF_M12 DB 10, 13, "STAFF REGISTER SUCCEED $"
	STF_M13 DB 10, 13, "STAFF REGISTER FAIL $"
	STF_M DB 10, 13, " $"
	STF_ID_ADD DB 16, ?, 16 DUP('$')

;---return and refund
	RTN_M1 DB 10, 13, "ENTER QUANTITY TO RETURN: $"
	RTN_M2 DB 10, 13, 10, 13, "TOTAL REFUND AMOUNT IS RM $"
	RTN_M3 DB 10, 13, "RETURN SUCCEED, PROCEED TO REFUND.... $"
	RTN_QTY DB 0, 0, 0
	RTN_TOT DB 0, 0, 0

;---SYSTEM MESSAGE
	MSG0 DB 10, 13, " $"
	MSG1 DB 10, 13, "EXITING PLASHSPEED..... $"
	MSG2 DB 10, 13, "INVALID CHOICE, PLEASE TRY AGAIN!!! $"
	MSG3 DB 10, 13, "REDIRECTING TO PLASHSPEED..... $"

	

;---------------Code Segment----------------
.CODE

MAIN PROC
	MOV AX,@DATA  ; Define data segment
	MOV DS,AX


;-----LOGIN
LOGIN:
	MOV AX, 03H
	INT 10H

	mov ah, 09h
	lea dx, LOGIN_M1
	int 21h

	mov ah, 0ah
	MOV DX, OFFSET LG     ;<=== TELL INT 21H TO STORE CAPTURED STRING HERE.
	int 21h

	MOV SI, OFFSET LG + 2 ;<=== POINT TO THE ARRAY OF CHARS.
	MOV DI, OFFSET PASSCODE      ;<=== POINT TO THE USER.
	ck: 
	;CHECK END OF USER.  
	  MOV DH, [DI]
	  CMP DH, '$'
	  JE  CLR_SCN                ;<=== END REACHED. ALL CHARS MATCH.

	;CHECK END OF INPUT.  
	  MOV DL, [SI]          ;<=== CURRENT ENTERED CHAR.
	  CMP DL, 13
	  JE  LOGIN             ;<=== END REACHED. INPUT IS SHORTER.

	;COMPARE CURRENT ENTERED CHAR TO CURRENT USER CHAR.  
	  CMP DL, DH
	  jne LOGIN             ;<=== CURRENT CHARS ARE DIFFERENT.
	  INC SI                ;<== NEXT ENTERED CHAR.
	  INC DI                ;<== NEXT USER CHAR.
	  JMP CK                ;<== REPEAT.

CLR_SCN:
	MOV AX, 03H
	INT 10H

;--------------codes
TOP:
	PRINT MAIN_MENU
	CALL ACCEPT		; USER ENTER CHOICE
	MOV CC, AL
	SUB CC, 30H
	

;---------CHECKOUT------------
CHECKOUT:
	CMP CC, 1		; GO TO INVENTORY IF CHOICE != 1
	JNE INVENTORY

	



	PRINT MSG3
	JMP TOP

;---------INVENTORY------------------
INVENTORY:
	CMP CC, 2		; GO TO CUSTOMER IF CHOICE != 2
	JNE CUSTOMER

	PRINT INV_MENU
	CALL ACCEPT
	MOV BL, AL
	SUB BL, 30H

	STK_REPORT:
		CMP BL, 1
		JNE STK_UPDATE

		CALL INV_REPORT

		PRINT MSG3
		JMP INVENTORY

	STK_UPDATE:
		CMP BL, 2
		JNE STK_SET_RMD

		CALL INV_UPDATE
		PRINT MSG3
		JMP INVENTORY

	STK_SET_RMD:
		CMP BL, 3
		JNE STK_RMD

		CALL INV_SETRMD

		PRINT MSG3
		JMP INVENTORY
	STK_RMD:
		CMP BL, 4
		JNE EXIT_STK
		

		PRINT MSG3
		JMP INVENTORY

	EXIT_STK:
		CMP BL, 9			; EXIT
		JNE STK_INVALID
		PRINT MSG3
		JMP TOP

	STK_INVALID:
		PRINT MSG2
		JMP INVENTORY

	PRINT MSG3
	JMP TOP

;--------CUSTOMER MANAGEMENT--------------
CUSTOMER:
	CMP CC, 3		; GO TO SALES IF CHOICE != 3
	JNE SALES


	PRINT MSG3
	JMP TOP

;---------SALES REPORTING-------------------
SALES:
	CMP CC, 4		; GO TO RETURN IF CHOICE != 4
	JNE RETURN


	PRINT MSG3
	JMP TOP

;---------RETURN AND REFUND----------------
RETURN:
	CMP CC, 5		; GO TO STAFF IF CHOICE != 5
	JNE STAFF

	PRINT PRO_MENU
	CALL RTN_CAL	; CAL TOTAL
	PRINT RTN_M3

	PRINT MSG3
	JMP TOP
;----------STAFF MANAGEMENT---------------
STAFF:
	CMP CC, 6		; EXIT IF CHOICE != 6
	JNE EXIT

	PRINT STF_MENU1		
	CALL ACCEPT		; USER ENTER CHOICE
	MOV BL, AL
	SUB BL, 48

	STF_NEW:			; NEW STAFF START
		CMP BL, 1
		JNE CHANGE_PASS

		CALL STF_ADD
		PRINT MSG3
		JMP STAFF			; NEW STAFF END

	CHANGE_PASS:
		CMP BL, 2
		JNE STF_REMOVE

		CALL STF_PASS
		PRINT STF_M4
		PRINT MSG3
		JMP STAFF

	STF_REMOVE:
		CMP BL, 3
		JNE EXIT_STAFF

		CALL STF_RMV

		PRINT MSG3
		JMP STAFF

	EXIT_STAFF:
		CMP BL, 9			; EXIT
		JNE STF_INVALID
		PRINT MSG3
		JMP TOP

	STF_INVALID:
		PRINT MSG2
		JMP STAFF

;-------EXIT----------------------
EXIT:
	CMP CC, 9
	JNE INVALID
		PRINT MSG1
		JMP QUIT 

;------INVALID CHOICE----------------
INVALID:
	PRINT MSG2
	JMP TOP

;--------ACCEPT CHOICE PROCEDURE
ACCEPT PROC NEAR
	MOV AH, 01H
	INT 21H
	RET
ACCEPT ENDP

;------------STOCK REPORT---DONE
INV_REPORT PROC NEAR
	PRINT INV_M8			;shirt quantity
	XOR AX, AX
	XOR BX, BX
	MOV AL, SHIRT_NUM_UP(0)
	MUL TEN
	ADD AL, SHIRT_NUM_UP(1)
	MOV BL, AL

	XOR AX, AX
	XOR DX, DX
	MOV AL, SHIRT_NUM
	ADD AL, BL
	DIV HUN
	MOV SHIRT_NUMD(0), AL
	MOV DL, AH
	XOR AX,AX
	MOV AL, DL	
	DIV Ten
	MOV SHIRT_NUMD(1), AL
	MOV SHIRT_NUMD(2), AH
	ADD SHIRT_NUMD(0), 30H
	ADD SHIRT_NUMD(1), 30H
	ADD SHIRT_NUMD(2), 30H
	MOV AH, 02H
	MOV DL, SHIRT_NUMD(0)
	INT 21H
	MOV AH, 02H
	MOV DL, SHIRT_NUMD(1)
	INT 21H
	MOV AH, 02H
	MOV DL, SHIRT_NUMD(2)
	INT 21H

	PRINT INV_M9			;shorts quantity
	XOR AX, AX
	XOR BX, BX
	MOV AL, SHORTS_NUM_UP(0)
	MUL TEN
	ADD AL, SHORTS_NUM_UP(1)
	MOV BL, AL

	XOR AX, AX
	XOR DX, DX
	MOV AL, SHORTS_NUM
	ADD AL, BL
	DIV HUN
	MOV SHORTS_NUMD(0), AL
	MOV DL, AH
	XOR AX,AX
	MOV AL, DL	
	DIV Ten
	MOV SHORTS_NUMD(1), AL
	MOV SHORTS_NUMD(2), AH
	ADD SHORTS_NUMD(0), 30H
	ADD SHORTS_NUMD(1), 30H
	ADD SHORTS_NUMD(2), 30H
	MOV AH, 02H
	MOV DL, SHORTS_NUMD(0)
	INT 21H
	MOV AH, 02H
	MOV DL, SHORTS_NUMD(1)
	INT 21H
	MOV AH, 02H
	MOV DL, SHORTS_NUMD(2)
	INT 21H

	PRINT INV_M10			;hats quantity
	XOR AX, AX
	XOR BX, BX
	MOV AL, HATS_NUM_UP(0)
	MUL TEN
	ADD AL, HATS_NUM_UP(1)
	MOV BL, AL

	XOR AX, AX
	XOR DX, DX
	MOV AL, HATS_NUM
	ADD AL, BL
	DIV HUN
	MOV HATS_NUMD(0), AL
	MOV DL, AH
	XOR AX,AX
	MOV AL, DL	
	DIV Ten
	MOV HATS_NUMD(1), AL
	MOV HATS_NUMD(2), AH
	ADD HATS_NUMD(0), 30H
	ADD HATS_NUMD(1), 30H
	ADD HATS_NUMD(2), 30H
	MOV AH, 02H
	MOV DL, HATS_NUMD(0)
	INT 21H
	MOV AH, 02H
	MOV DL, HATS_NUMD(1)
	INT 21H
	MOV AH, 02H
	MOV DL, HATS_NUMD(2)
	INT 21H

	PRINT INV_M11		;socks quantity
	XOR AX, AX
	XOR BX, BX
	MOV AL, SOCKS_NUM_UP(0)
	MUL TEN
	ADD AL, SOCKS_NUM_UP(1)
	MOV BL, AL

	XOR AX, AX
	XOR DX, DX
	MOV AL, SOCKS_NUM
	ADD AL, BL
	DIV HUN
	MOV SOCKS_NUMD(0), AL
	MOV DL, AH
	XOR AX,AX
	MOV AL, DL	
	DIV Ten
	MOV SOCKS_NUMD(1), AL
	MOV SOCKS_NUMD(2), AH
	ADD SOCKS_NUMD(0), 30H
	ADD SOCKS_NUMD(1), 30H
	ADD SOCKS_NUMD(2), 30H
	MOV AH, 02H
	MOV DL, SOCKS_NUMD(0)
	INT 21H
	MOV AH, 02H
	MOV DL, SOCKS_NUMD(1)
	INT 21H
	MOV AH, 02H
	MOV DL, SOCKS_NUMD(2)
	INT 21H

	RET
INV_REPORT ENDP

;------------UPDATE STOCK
INV_UPDATE PROC NEAR
	PRINT PRO_MENU
	CALL ACCEPT
	MOV BL, AL
	SUB BL, 30H
	UP_SHIRT:
		CMP BL, 1
		JNE UP_SHORTS

		PRINT INV_M12
		XOR AX, AX
		CALL ACCEPT
		MOV SHIRT_NUM_UP(0), AL
		SUB SHIRT_NUM_UP(0), 30H
		CALL ACCEPT
		MOV SHIRT_NUM_UP(1), AL
		SUB SHIRT_NUM_UP(1), 30H
		XOR BX, BX
		MOV AL, SHIRT_NUM_UP(0)
		MUL TEN
		ADD AL, SHIRT_NUM_UP(1)
		MOV BL, AL

		XOR AX, AX
		XOR DX, DX
		MOV AL, SHIRT_NUM
		ADD AL, BL
		DIV HUN
		MOV SHIRT_NUMD(0), AL
		MOV DL, AH
		XOR AX,AX
		MOV AL, DL	
		DIV Ten
		MOV SHIRT_NUMD(1), AL
		MOV SHIRT_NUMD(2), AH
		ADD SHIRT_NUMD(0), 30H
		ADD SHIRT_NUMD(1), 30H
		ADD SHIRT_NUMD(2), 30H
		PRINT INV_M13
		MOV AH, 02H
		MOV DL, SHIRT_NUMD(0)
		INT 21H
		MOV AH, 02H
		MOV DL, SHIRT_NUMD(1)
		INT 21H
		MOV AH, 02H
		MOV DL, SHIRT_NUMD(2)
		INT 21H
		
		RET
	UP_SHORTS:
		CMP BL, 2
		JNE UP_HATS

		PRINT INV_M12
		XOR AX, AX
		CALL ACCEPT
		MOV SHORTS_NUM_UP(0), AL
		SUB SHORTS_NUM_UP(0), 30H
		CALL ACCEPT
		MOV SHORTS_NUM_UP(1), AL
		SUB SHORTS_NUM_UP(1), 30H
		XOR BX, BX
		MOV AL, SHORTS_NUM_UP(0)
		MUL TEN
		ADD AL, SHORTS_NUM_UP(1)
		MOV BL, AL

		XOR AX, AX
		XOR DX, DX
		MOV AL, SHORTS_NUM
		ADD AL, BL
		DIV HUN
		MOV SHORTS_NUMD(0), AL
		MOV DL, AH
		XOR AX,AX
		MOV AL, DL	
		DIV Ten
		MOV SHORTS_NUMD(1), AL
		MOV SHORTS_NUMD(2), AH
		ADD SHORTS_NUMD(0), 30H
		ADD SHORTS_NUMD(1), 30H
		ADD SHORTS_NUMD(2), 30H
		PRINT INV_M13
		MOV AH, 02H
		MOV DL, SHORTS_NUMD(0)
		INT 21H
		MOV AH, 02H
		MOV DL, SHORTS_NUMD(1)
		INT 21H
		MOV AH, 02H
		MOV DL, SHORTS_NUMD(2)
		INT 21H
		
		RET
	UP_HATS:
		CMP BL, 3
		JNE UP_SOCKS

		PRINT INV_M12
		XOR AX, AX
		CALL ACCEPT
		MOV HATS_NUM_UP(0), AL
		SUB HATS_NUM_UP(0), 30H
		CALL ACCEPT
		MOV HATS_NUM_UP(1), AL
		SUB HATS_NUM_UP(1), 30H
		XOR BX, BX
		MOV AL, HATS_NUM_UP(0)
		MUL TEN
		ADD AL, HATS_NUM_UP(1)
		MOV BL, AL

		XOR AX, AX
		XOR DX, DX
		MOV AL, HATS_NUM
		ADD AL, BL
		DIV HUN
		MOV HATS_NUMD(0), AL
		MOV DL, AH
		XOR AX,AX
		MOV AL, DL	
		DIV Ten
		MOV HATS_NUMD(1), AL
		MOV HATS_NUMD(2), AH
		ADD HATS_NUMD(0), 30H
		ADD HATS_NUMD(1), 30H
		ADD HATS_NUMD(2), 30H
		PRINT INV_M13
		MOV AH, 02H
		MOV DL, HATS_NUMD(0)
		INT 21H
		MOV AH, 02H
		MOV DL, HATS_NUMD(1)
		INT 21H
		MOV AH, 02H
		MOV DL, HATS_NUMD(2)
		INT 21H
		
		RET
	UP_SOCKS:
		CMP BL, 4
		JNE UP_EXIT

		PRINT INV_M12
		XOR AX, AX
		CALL ACCEPT
		MOV SOCKS_NUM_UP(0), AL
		SUB SOCKS_NUM_UP(0), 30H
		CALL ACCEPT
		MOV SOCKS_NUM_UP(1), AL
		SUB SOCKS_NUM_UP(1), 30H
		XOR BX, BX
		MOV AL, SOCKS_NUM_UP(0)
		MUL TEN
		ADD AL, SOCKS_NUM_UP(1)
		MOV BL, AL

		XOR AX, AX
		XOR DX, DX
		MOV AL, SOCKS_NUM
		ADD AL, BL
		DIV HUN
		MOV SOCKS_NUMD(0), AL
		MOV DL, AH
		XOR AX,AX
		MOV AL, DL	
		DIV Ten
		MOV SOCKS_NUMD(1), AL
		MOV SOCKS_NUMD(2), AH
		ADD SOCKS_NUMD(0), 30H
		ADD SOCKS_NUMD(1), 30H
		ADD SOCKS_NUMD(2), 30H
		PRINT INV_M13
		MOV AH, 02H
		MOV DL, SOCKS_NUMD(0)
		INT 21H
		MOV AH, 02H
		MOV DL, SOCKS_NUMD(1)
		INT 21H
		MOV AH, 02H
		MOV DL, SOCKS_NUMD(2)
		INT 21H
		
		RET

	UP_EXIT:
		CMP BL, 9
		JNE UP_INVALID
		PRINT MSG3
		JMP TOP

	UP_INVALID:
		PRINT MSG2
		JMP INV_UPDATE
	
	RET
INV_UPDATE ENDP

;------------SET REMAINDER TO BUY STOCK---DONE
INV_SETRMD PROC NEAR
	PRINT INV_M1
	MOV AH, 01H		; DIGIT 1
	INT 21H
	MOV RMD(0), AL
	MOV AH, 01H		; DIGIT 2
	INT 21H
	MOV RMD(1), AL
	PRINT INV_M2	
	MOV AH, 02H		; PRINT DIGIT 1
	MOV DL, RMD(0)
	INT 21H
	MOV AH, 02H		; PRINT DIGIT 2
	MOV DL, RMD(1)
	INT 21H

	SUB RMD(0), 30H
	SUB RMD(1), 30H
	XOR AX, AX
	MOV AL, RMD(0)
	MUL TEN
	ADD AL, RMD(1)
	ADD RMD(0), 30H
	ADD RMD(1), 30H
	
	RET
INV_SETRMD ENDP

;------------STAFF NEW-----------------DONE
STF_ADD PROC NEAR
	PRINT STF_M5                                 
    MOV AH, 0AH 			;CAPTURE STRING FROM KEYBOARD.
    MOV DX, OFFSET STF_ID_ADD
    INT 21H

	;CHANGE CHR(13) BY '$'.
    MOV SI, OFFSET STF_ID_ADD + 1 ;NUMBER OF CHARACTERS ENTERED.
    MOV CL, [SI] ;MOVE LENGTH TO CL.
    MOV CH, 00      ;CLEAR CH TO USE CX. 
    INC CX ;TO REACH CHR(13).
    ADD SI, CX ;NOW SI POINTS TO CHR(13).
    MOV AL, '$'
    MOV [SI], AL ;REPLACE CHR(13) BY '$'.            

	STF_ADD_Q:
		PRINT STF_M10               
    	MOV AH, 9 					;DISPLAY STRING.
    	MOV DX, OFFSET STF_ID_ADD + 2	;MUST END WITH '$'.
   		INT 21H

		PRINT STF_M11
		CALL ACCEPT
		MOV BL, AL
		SUB BL, 30H
		STF_ADD_CON:				;CONFIRM
			CMP BL, 1
			JNE STF_ADD_CAN
			PRINT STF_M12
			RET
		STF_ADD_CAN:				;CANCEL
			CMP BL, 2
			JNE STF_ADD_INVALID
			PRINT STF_M13
			RET
		STF_ADD_INVALID:
			PRINT MSG2
			JMP STF_ADD_Q
STF_ADD ENDP

;------------STAFF REMOVE-------------DONE
STF_RMV PROC NEAR
	PRINT STF_M5                                 
    MOV AH, 0AH 			;CAPTURE STRING FROM KEYBOARD.
    MOV DX, OFFSET STF_ID_RMV
    INT 21H

	;CHANGE CHR(13) BY '$'.
    MOV SI, OFFSET STF_ID_RMV + 1 ;NUMBER OF CHARACTERS ENTERED.
    MOV CL, [SI] ;MOVE LENGTH TO CL.
    MOV CH, 00      ;CLEAR CH TO USE CX. 
    INC CX ;TO REACH CHR(13).
    ADD SI, CX ;NOW SI POINTS TO CHR(13).
    MOV AL, '$'
    MOV [SI], AL ;REPLACE CHR(13) BY '$'.            

	STF_RMV_Q:
		PRINT STF_M6                 
    	MOV AH, 9 					;DISPLAY STRING.
    	MOV DX, OFFSET STF_ID_RMV + 2	;MUST END WITH '$'.
   		INT 21H

		PRINT STF_M7
		CALL ACCEPT
		MOV BL, AL
		SUB BL, 30H
		STF_RMV_CON:
			CMP BL, 1
			JNE STF_RMV_CAN
			PRINT STF_M8
			RET
		STF_RMV_CAN:
			CMP BL, 2
			JNE STF_RMV_INVALID
			PRINT STF_M9
			RET
		STF_RMV_INVALID:
			PRINT MSG2
			JMP STF_RMV_Q
STF_RMV ENDP

;------------STAFF CHANGE PASSWORD-----CLEAR STRING IN VARIABLE
STF_PASS PROC NEAR
	PSW_IN:
		LEA SI, NEW_PSW
		LEA DI, CON_PSW
		PRINT STF_M1
		MOV AH, 0AH		;FIRST STRING
        MOV DX, SI
        INT 21H
		PRINT STF_M2
		MOV AH, 0AH		;SECOND STRING
        MOV DX, DI
        INT 21H
		XOR BX, BX
        MOV BL, NEW_PSW + 1
        MOV BH, CON_PSW + 1
        CMP BL, BH
        JNE CMPR_PSW_FAIL
        ADD SI, 2
        ADD DI, 2
    CMPR_PSW:
	  	MOV BL, BYTE PTR[SI]
        CMP BYTE PTR[DI], BL
        JNE CMPR_PSW_FAIL
        INC SI
        INC DI
        CMP BYTE PTR[DI], "$"
        JNE CMPR_PSW
		RET
    CMPR_PSW_FAIL:
	  	PRINT STF_M3
		JMP CHANGE_PASS

STF_PASS ENDP

;-------------CALCULATE TOTAL REFUND AMOUNT----DONE
RTN_CAL PROC NEAR
		MOV AH, 01H
		INT 21H
		MOV DL, AL
		SUB DL, 30H
		RTN_SHIRT:
			CMP DL, 1
			JNE RTN_SHORTS

			PRINT RTN_M1
			MOV AH, 01H		; DIGIT 1
			INT 21H			
			MOV RTN_QTY(0), AL
			SUB RTN_QTY(0), 30H
			MOV AH, 01H		; DIGIT 2
			INT 21H				
			MOV RTN_QTY(1), AL
			SUB RTN_QTY(1), 30H
			XOR AX, AX				; COMBINE DIGIT1 & DIGIT 2
			MOV AL, RTN_QTY(0)
			MUL TEN
			ADD AL, RTN_QTY(1)
			
			XOR DX, DX
			XOR BX, BX
			MUL SHIRT				; PRICE OF PRODUCT
			DIV HUN
			MOV RTN_TOT(0), AL
			MOV DL, AH
			XOR AX,AX
			MOV AL, DL	
			DIV Ten		
			MOV RTN_TOT(1), AL
			MOV RTN_TOT(2), AH
			ADD RTN_TOT(0), 30H
			ADD RTN_TOT(1), 30H
			ADD RTN_TOT(2), 30H
			PRINT RTN_M2
			MOV AH, 02H
			MOV DL, RTN_TOT(0)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(1)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(2)
			INT 21H
		
			RET
		RTN_SHORTS:
			CMP DL, 2
			JNE RTN_HATS

			PRINT RTN_M1
			MOV AH, 01H		; DIGIT 1
			INT 21H			
			MOV RTN_QTY(0), AL
			SUB RTN_QTY(0), 30H
			MOV AH, 01H		; DIGIT 2
			INT 21H				
			MOV RTN_QTY(1), AL
			SUB RTN_QTY(1), 30H
			XOR AX, AX				; COMBINE DIGIT1 & DIGIT 2
			MOV AL, RTN_QTY(0)
			MUL TEN
			ADD AL, RTN_QTY(1)
			XOR DX, DX
			XOR BX, BX

			MUL SHORTS				; PRICE OF PRODUCT
			DIV HUN
			MOV RTN_TOT(0), AL
			MOV DL, AH
			XOR AX,AX
			MOV AL, DL	
			DIV Ten		
			MOV RTN_TOT(1), AL
			MOV RTN_TOT(2), AH
			ADD RTN_TOT(0), 30H
			ADD RTN_TOT(1), 30H
			ADD RTN_TOT(2), 30H
			PRINT RTN_M2
			MOV AH, 02H
			MOV DL, RTN_TOT(0)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(1)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(2)
			INT 21H

			RET
		RTN_HATS:
			CMP DL, 3
			JNE RTN_SOCKS

			PRINT RTN_M1
			MOV AH, 01H		; DIGIT 1
			INT 21H			
			MOV RTN_QTY(0), AL
			SUB RTN_QTY(0), 30H
			MOV AH, 01H		; DIGIT 2
			INT 21H				
			MOV RTN_QTY(1), AL
			SUB RTN_QTY(1), 30H
			XOR AX, AX				; COMBINE DIGIT1 & DIGIT 2
			MOV AL, RTN_QTY(0)
			MUL TEN
			ADD AL, RTN_QTY(1)
			XOR DX, DX
			XOR BX, BX

			MUL HATS				; PRICE OF PRODUCT
			DIV HUN
			MOV RTN_TOT(0), AL
			MOV DL, AH
			XOR AX,AX
			MOV AL, DL	
			DIV Ten		
			MOV RTN_TOT(1), AL
			MOV RTN_TOT(2), AH
			ADD RTN_TOT(0), 30H
			ADD RTN_TOT(1), 30H
			ADD RTN_TOT(2), 30H
			PRINT RTN_M2
			MOV AH, 02H
			MOV DL, RTN_TOT(0)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(1)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(2)
			INT 21H

			RET
		RTN_SOCKS:
			CMP DL, 4
			JNE RTN_EXIT

			PRINT RTN_M1
			MOV AH, 01H		; DIGIT 1
			INT 21H			
			MOV RTN_QTY(0), AL
			SUB RTN_QTY(0), 30H
			MOV AH, 01H		; DIGIT 2
			INT 21H				
			MOV RTN_QTY(1), AL
			SUB RTN_QTY(1), 30H
			XOR AX, AX				; COMBINE DIGIT1 & DIGIT 2
			MOV AL, RTN_QTY(0)
			MUL TEN
			ADD AL, RTN_QTY(1)
			XOR DX, DX
			XOR BX, BX

			MUL SOCKS				; PRICE OF PRODUCT
			DIV HUN
			MOV RTN_TOT(0), AL
			MOV DL, AH
			XOR AX,AX
			MOV AL, DL	
			DIV Ten		
			MOV RTN_TOT(1), AL
			MOV RTN_TOT(2), AH
			ADD RTN_TOT(0), 30H
			ADD RTN_TOT(1), 30H
			ADD RTN_TOT(2), 30H
			PRINT RTN_M2
			MOV AH, 02H
			MOV DL, RTN_TOT(0)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(1)
			INT 21H
			MOV AH, 02H
			MOV DL, RTN_TOT(2)
			INT 21H

			RET
		RTN_EXIT:
			CMP DL, 9			; EXIT
			JNE RTN_INVALID
			PRINT MSG3
			JMP TOP

		RTN_INVALID:
			PRINT MSG2
			JMP RETURN

			RET
RTN_CAL ENDP


;--------------EXIT PROGRAM
QUIT:				; EXIT PROGRAM
	MOV AH, 4CH
	INT 21H

	MAIN ENDP
END MAIN